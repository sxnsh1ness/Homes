# HomesPlugin для Paper 1.21.4+

Плагин для управления точками домов с сохранением в базу данных (SQLite или MySQL), интеграцией с LuckPerms, BossBar прогрессом и системой кулдаунов.

## Возможности

- ✅ Создание точек домов
- ✅ Удаление точек домов
- ✅ Переименование точек домов
- ✅ Просмотр списка всех домов
- ✅ Телепортация на точку дома с задержкой
- ✅ **BossBar с прогрессом** телепортации
- ✅ **Система кулдаунов** на команду /home
- ✅ Красивые эффекты пламени во время ожидания
- ✅ Отмена телепортации при движении
- ✅ Выбор между SQLite и MySQL
- ✅ Интеграция с LuckPerms для настройки лимитов по группам
- ✅ Гибкая система лимитов через конфиг
- ✅ Полностью настраиваемые сообщения с цветами

## Команды

| Команда | Алиасы | Описание |
|---------|--------|----------|
| `/sethome <название>` | - | Создать или обновить точку дома |
| `/home <название>` | `/h` | Телепортироваться на точку дома |
| `/delhome <название>` | - | Удалить точку дома |
| `/renamehome <старое> <новое>` | - | Переименовать точку дома |
| `/homes` | `/homelist` | Показать список всех ваших домов |

## Требования

- Java 21
- Paper/Purpur/Pufferfish 1.21.4 или выше
- **LuckPerms** (обязательно!)
- MySQL Server (опционально, если используете MySQL)
- Gradle

## Сборка

```bash
./gradlew build
```

Скомпилированный JAR файл будет находиться в `build/libs/`

## Установка

1. Установите LuckPerms на ваш сервер
2. Скомпилируйте плагин или скачайте готовый JAR
3. Поместите файл в папку `plugins` вашего сервера
4. Перезапустите сервер
5. Настройте `config.yml` в папке `plugins/HomesPlugin/`

## Конфигурация

### Настройки телепортации и кулдауна

Плагин поддерживает задержку телепортации с BossBar и системой кулдаунов:

```yaml
teleport:
  delay: 5                     # Задержка в секундах
  cancel-on-move: true         # Отменять при движении
  show-flame-effects: true     # Эффекты пламени
  
  # Настройки BossBar
  bossbar:
    title: "&6&lТелепортация через {time}с"
    color: YELLOW              # BLUE, GREEN, PINK, PURPLE, RED, WHITE, YELLOW
    style: PROGRESS            # PROGRESS, NOTCHED_6, NOTCHED_10, NOTCHED_12, NOTCHED_20
  
  # Звуки
  sound-start: BLOCK_PORTAL_TRIGGER
  sound-success: ENTITY_ENDERMAN_TELEPORT
  sound-cancel: ENTITY_VILLAGER_NO

cooldown:
  home-command: 3              # Кулдаун /home в секундах
  apply-on-command: true       # true = сразу, false = после телепортации
```

**Особенности:**
- При использовании `/home` игрок должен стоять на месте 5 секунд
- Прогресс отображается через **BossBar** вверху экрана
- Во время ожидания вокруг игрока появляются частицы пламени
- Если игрок сдвинется с места, телепортация отменится
- **Кулдаун 3 секунды** между использованиями `/home`
- BossBar полностью настраиваемый (цвет, стиль, текст)

### Выбор базы данных

В файле `config.yml` вы можете выбрать тип базы данных:

```yaml
database:
  type: SQLITE  # или MYSQL
  
  mysql:
    host: localhost
    port: 3306
    database: minecraft
    username: root
    password: password
    useSSL: false
    autoReconnect: true
```

**SQLite (по умолчанию):**
- Простая в использовании
- Не требует отдельного сервера
- Файл: `plugins/HomesPlugin/homes.db`
- Идеально для небольших серверов

**MySQL:**
- Подходит для больших серверов
- Поддержка кластеров и репликации
- Требует MySQL Server 5.7+ или MariaDB 10.2+
- Лучшая производительность при большом количестве данных

### Настройка лимитов для групп

```yaml
group-limits:
  default: 3      # Обычные игроки - 3 дома
  vip: 5          # VIP игроки - 5 домов
  premium: 10     # Premium игроки - 10 домов
  admin: 20       # Администраторы - 20 домов
  owner: -1       # Владельцы - безлимит
```

**Как работает:**
- Плагин проверяет все группы игрока в LuckPerms
- Выбирается наибольший лимит
- `-1` означает безлимитные дома

## Особенности

- BossBar с индикацией прогресса телепортации
- Система кулдаунов для предотвращения спама
- Эффекты частиц пламени во время ожидания
- Настраиваемые звуки для всех событий
- Поддержка SQLite и MySQL
- Автоматическое определение лимита по группам LuckPerms
- Все сообщения настраиваются через конфиг
- Поддержка цветовых кодов (&)

## Разрешения

- `homesplugin.use` - доступ ко всем командам (по умолчанию для всех)
- `homesplugin.admin` - административные права (по умолчанию для операторов)

## Зависимости

- LuckPerms API 5.4
- SQLite JDBC 3.47.1.0
- MySQL Connector/J 8.3.0

## Лицензия

Свободное использование

## Автор

Sxnsh1ne
